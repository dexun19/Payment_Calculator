(()=>{"use strict";function e(){document.getElementById("app").innerHTML='\n    <h1>Payment Calculator</h1>    <h4> By: De Xun</h4>\n    <h4> Last Modified: 22/09/2025</h4>\n    <button id="addPlayer">Add Player</button>\n    <form id="playerForm">\n      <div id="playerInputs"></div>\n      <p id="errorMessage" style="color: red; display: none;"></p>\n      <button type="submit">Submit</button>\n    </form>\n  ';let e=0;const t=document.getElementById("playerInputs"),n=document.getElementById("addPlayer"),a=document.getElementById("errorMessage");n.addEventListener("click",(()=>{e++;const n=document.createElement("div");n.innerHTML=`\n      <label>Player ${e} Win/Loss Amount(Positive = Gain, Negative = Loss): </label>\n      <input type="number" name="Player ${e}" />\n    `,t.appendChild(n)})),document.getElementById("playerForm").addEventListener("submit",(t=>{if(t.preventDefault(),e<2)return a.style.display="block",void(a.innerHTML="Please add at least 2 players.");const n=new FormData(t.target),l=Array.from(n.entries()).map((([e,t])=>({player:e,value:Number(t)})));let r=!1;if(l.forEach((e=>{0!==e.value&&(r=!0)})),!r)return a.style.display="block",void(a.innerHTML="Please add at least 1 player with non-zero gain/loss.");a.style.display="none",localStorage.setItem("playersData",JSON.stringify(l)),o("/results")}))}function t(e,t,n){const a=e[t],o=e[n];let l=Math.min(a,Math.abs(o));return e[t]-=l,e[n]+=l,`Player ${n+1} has to pay Player ${t+1} $${l}.\n`}function n(){const e=document.getElementById("app"),n=JSON.parse(localStorage.getItem("playersData"))||[];e.innerHTML='\n    <h1>Results</h1>\n    <button id="backButton">Go Back</button>\n    <ul id="resultsList"></ul>\n    <div id="paymentResult"></div>\n  ';const a=document.getElementById("resultsList");n.forEach((e=>{const t=document.createElement("li");t.textContent=`${e.player}: ${e.value}`,a.appendChild(t)}));const l=function(e){try{if(e.length<=0)return"Total amount of players are invalid.";const n=function(e=[]){let n=0,a=[];if(e.forEach((e=>{a.push(e.value)})),a.forEach((e=>{if(isNaN(e))return`Invalid total nett is inputted. Input was ${e}`;console.log(e),n+=e})),0!==n)return console.log("Incorrect total amount to be settled. Try again."),`Incorrect nett amount to be settled, by ${n>0?"$"+n:"-$"+-n}. Try again.`;const o=function(e){let n=0,a=0,o=!0,l="";for(;o;){let r,i;for(let t=0;t<=e.length&&(e[t]>0&&null==r?(r=e[t],n=t):e[t]<0&&null==i&&(i=e[t],a=t),void 0===r||void 0===i);t++);l+=t(e,n,a);let s=!1;for(let t=0;t<e.length;t++)if(0!==e[t]){s=!0;break}o=!!s}return l+="\nAll player amount has been settled. Have a good day!",l}(a);return o}(e);return n}catch(e){console.log(`Error: ${e}`)}}(n);document.getElementById("paymentResult").innerHTML=l.replace(/\n/g,"<br>"),document.getElementById("backButton").addEventListener("click",(()=>{o("/input")}))}function a(){const t={"/input":e,"/results":n};function a(){const e=window.location.pathname;(t[e]||t["/input"])()}window.addEventListener("popstate",a),a()}function o(e){window.history.pushState({},"",e),a()}window.addEventListener("hashchange",a),window.addEventListener("load",a)})();